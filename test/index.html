<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test</title>
    <link type="text/css" rel="stylesheet" href="../bedrock/database.css?v=2" />
</head>

<style>
    * {
        box-sizing: border-box;
    }

    html {
        -webkit-text-size-adjust: 100%;
        -moz-text-size-adjust: 100%;
        text-size-adjust: 100%;
    }

    body {
        font-family: sans-serif;
        color: rgba(0, 0, 192, 1.0);
        text-align: center;
        width: 100%;
        margin: 0 auto !important;
        float: none !important;
        padding: 10px;
    }

    .databaseDisplay {

    }

    .databaseLine {

    }
</style>

<body>
<div id="filterContainer" class="filterContainer"></div>
<div id="databaseDisplay" class="databaseDisplay"></div>
</body>
</html>

<script src="../bedrock/html.js"></script>
<script src="../bedrock/database.js"></script>
<script>
    let now = new Date ().getTime ();
    let request = new XMLHttpRequest ();
    request.overrideMimeType ("application/json");
    request.open ("GET", "bsc5-short.json?" + now, true);
    request.onload = function () {
        let database = JSON.parse (this.responseText);
        console.log ("loaded.");
        makeFilter(database, 6, function (db) {
            let innerHTML = "";
            for (let record of db) {
                let recordHTML = "";
                let keys = Object.keys(record).sort ();
                let first = true;
                for (let key of keys) {
                    if (! first) {
                        recordHTML += ", "
                    } else {
                        first = false;
                    }
                    recordHTML += "\"" + key + "\": \"" + record[key] + "\"";
                }
                innerHTML += div ("databaseLine", recordHTML);
            }
            document.getElementById("databaseDisplay").innerHTML = innerHTML;
        });
    };
    request.send ();
</script>
